{"version":3,"file":"oauth.min.js","sources":["oauth.js"],"names":["root","factory","define","amd","OAuth","exports","module","this","Error","Request","CredentialsPromise","_loginCb","_loginOpts","_deferred","_requestManager","prototype","sendCredentials","credentials","loginFnCb","resolve","_setLoginCb","loginCb","_setLoginOpts","loginOpts","_setDeferred","deferred","_setRequestManager","requestManager","StorageManager","configuration","_storage","localStorage","_storageKey","Storage","storage","undefined","sessionStorage","storageKey","getAccessToken","accessTokenResponse","getAccessTokenResponse","accessToken","access_token","rawAccessTokenResponse","getItem","JSON","parse","getRefreshToken","refreshToken","refresh_token","persistRawAccessTokenResponse","setItem","AngularRequestManager","start","BackboneRequestManager","_backupedBackboneDotAjax","_clientType","_loginFn","_parseErrorFn","_clientId","_storageManager","_tokenEndpoint","Backbone","ajax","loginFn","clientId","tokenEndpoint","parseErrorFn","getStorageManager","getLoginStatus","cb","status","authResponse","_onLoginError","options","console","log","_onTokenEndpointPostError","jqXHR","textStatus","errorThrown","$","Deferred","responseJSON","error","done","_onTokenEndpointPostSuccess","data","stringify","_onLoginSuccess","ajaxPromise","grant_type","contentType","client_id","username","password","type","url","facebook_access_token","facebook_app_scoped_user_id","proxy","fail","login","opts","credentialsPromise","logout","This","_overwrittenBackboneDotAjax","apply","arguments","_cloneAjaxArguments","ajaxArguments","clonedAjaxArguments","length","_cloneAjaxSettings","ajaxSettings","settingsAttributes","clonedAjaxSettings","i","_createOAuthPromise","jQueryAjaxPromise","oAuthPromise","getResponseHeader","key","getAllResponseHeaders","setRequestHeader","name","value","overrideMimeType","statusCode","map","abort","statusText","success","readyState","_jQueryAjaxPromiseDone","originalAjaxArguments","oauthPromise","_jQueryAjaxPromiseFail","action","_refreshAccessToken","_reniewAccessToken","reject","_updateAjaxArgumentsWithAccessToken","secured","indexOf","_onOriginalRequestReplayedDone","_onOriginalRequestReplayedFail","_onRefreshAccessTokenSuccess","_onReniewAccessTokenSuccess","dataType","_onCredentialsPromiseDone","credentialsSettings","init","framework","settings"],"mappings":"CAAC,SAASA,EAAMC,GAEU,kBAAXC,SAAyBA,OAAOC,IAEvCD,UAAW,WAEP,MAAQF,GAAKI,MAAQH,EAAQD,KAMT,mBAAZK,SAEZC,OAAOD,QAAUJ,EAAQD,GAMzBA,EAAKI,MAAQH,EAAQD,IAI3BO,KAAM,WAEJ,YAKA,IAAIH,IAKEI,SAKAC,WA6sCN,OAjsCAL,GAAMM,mBAAqB,WAOvBH,KAAKI,SAAW,KAOhBJ,KAAKK,WAAa,KAOlBL,KAAKM,UAAY,KAOjBN,KAAKO,gBAAkB,MAI3BV,EAAMM,mBAAmBK,WASrBC,gBAAkB,SAASC,EAAaC,GAIpC,MAFAX,MAAKM,UAAUM,QAAQF,EAAaC,GAE7BX,KAAKM,WAUhBO,YAAc,SAASC,GAEnBd,KAAKI,SAAWU,GASpBC,cAAgB,SAASC,GAErBhB,KAAKK,WAAaW,GAUtBC,aAAe,SAASC,GAEpBlB,KAAKM,UAAYY,GASrBC,mBAAqB,SAASC,GAE1BpB,KAAKO,gBAAkBa,IAU/BvB,EAAMwB,eAAiB,SAASC,GAoB5B,GAVAtB,KAAKuB,SAAWC,aAOhBxB,KAAKyB,YAAc,WAGG,mBAAZC,SAEN,KAAM,IAAIzB,OAAM,oDAKpB,IAA4B,gBAAlBqB,GAA4B,CAGlC,OAAOA,EAAcK,SACjB,IAAK,QACL,IAAK,MACL,IAAKC,QACD5B,KAAKuB,SAAWC,YAChB,MACJ,KAAK,UACDxB,KAAKuB,SAAWM,cAChB,MACJ,SACI,KAAM,IAAI5B,OAAM,oCAIxBD,KAAKyB,YAAkD,gBAA7BH,GAAcQ,WAA0BR,EAAcQ,WAAa,aAMrGjC,EAAMwB,eAAeb,WAOjBuB,eAAiB,WAEb,GAAIC,GAAsBhC,KAAKiC,yBAC3BC,EAAsC,OAAxBF,EAA+BA,EAAoBG,aAAe,IAGpF,OAAuB,QAAhBD,GAAwCN,SAAhBM,EAA4B,KAAOA,GAStED,uBAAyB,WAErB,GAAIG,GAAyBpC,KAAKuB,SAASc,QAAQrC,KAAKyB,YAAc,uBAEtE,OAAkC,QAA3BW,EAAkCE,KAAKC,MAAMH,GAA0B,MASlFI,gBAAkB,WAEd,GAAIR,GAAsBhC,KAAKiC,yBAC3BQ,EAAuC,OAAxBT,EAA+BA,EAAoBU,cAAgB,IAGtF,OAAwB,QAAjBD,GAA0Cb,SAAjBa,EAA6B,KAAOA,GAUxEE,8BAAgC,SAASP,GAIrCpC,KAAKuB,SAASqB,QAAQ5C,KAAKyB,YAAc,uBAAwBW,KAKzEvC,EAAMK,QAAQ2C,sBAAwB,aACtChD,EAAMK,QAAQ2C,sBAAsBrC,WAEhCsC,MAAQ,cAQZjD,EAAMK,QAAQ6C,uBAAyB,SAASzB,GAwC5C,GAnCAtB,KAAKgD,yBAA2B,KAKhChD,KAAKiD,YAAc,WAKnBjD,KAAKkD,SAAW,KAKhBlD,KAAKmD,cAAgB,KAKrBnD,KAAKoD,UAAY,KAKjBpD,KAAKqD,gBAAkB,KAOvBrD,KAAKsD,eAAiB,KAGC,mBAAbC,WAAyC,OAAbA,SAgBlC,KAAM,IAAItD,OAAM,8BAbhB,IAA4B,kBAAlBsD,UAASC,KAEf,KAAM,IAAIvD,OAAM,mDAgBxB,IAZID,KAAKgD,yBAA2BO,SAASC,KAYjB,gBAAlBlC,GAiDN,KAAM,IAAIrB,OAAM,uCA9ChB,IAAoC,kBAA1BqB,GAAcmC,QAEpB,KAAM,IAAIxD,OAAM,kCAOpB,IAHAD,KAAKkD,SAAW5B,EAAcmC,QAGO,mBAA3BnC,GAAcoC,SAEpB,KAAM,IAAIzD,OAAM,6BAOpB,IAHAD,KAAKoD,UAAY9B,EAAcoC,SAGW,gBAAhCpC,GAAcqC,cAEpB,KAAM,IAAI1D,OAAM,2DAOpB,IAHAD,KAAKsD,eAAiBhC,EAAcqC,cAGK,kBAA/BrC,GAAcsC,aAEpB,KAAM,IAAI3D,OAAM,wCAIpBD,MAAKmD,cAAgB7B,EAAcsC,aAGnC5D,KAAKqD,gBAAkB,GAAIxD,GAAMwB,gBAC7BM,QAAUL,EAAcK,QACxBG,WAAaR,EAAcQ,cAavCjC,EAAMK,QAAQ6C,uBAAuBvC,WAOjCqD,kBAAoB,WAEhB,MAAO7D,MAAKqD,iBAUhBS,eAAiB,SAASC,GAYlBA,EAFiD,OAAlD/D,KAAKqD,gBAAgBpB,0BAIZ+B,OAAS,iBAWTA,OAAS,YACTC,aAAejE,KAAKqD,gBAAgBpB,4BAQpDiC,cAAgB,SAASC,GAGrBC,QAAQC,IAAI,iBACZD,QAAQC,IAAIF,IAchBG,0BAA4B,SAASP,EAAIpD,EAAW4D,EAAOC,EAAYC,GAYnE,GAVAL,QAAQC,IAAI,gBACZD,QAAQC,IAAIE,GACZH,QAAQC,IAAIG,GACZJ,QAAQC,IAAII,GAOY,mBAAd9D,GAA2B,CAEjC,GAAIO,GAAWwD,EAAEC,UAEjBhE,IAEQqD,OAASO,EAAMK,aAAaC,MAC5BZ,aAAeM,EAAMK,cAEzB,WAAa1D,EAASN,YAI1BM,EAAS4D,KAAK,WAEVf,GAEQC,OAASO,EAAMK,aAAaC,MAC5BZ,aAAeM,EAAMK,qBAWjCb,IAEQC,OAASO,EAAMK,aAAaC,MAC5BZ,aAAeM,EAAMK,gBAkBrCG,4BAA8B,SAAShB,EAAIpD,EAAWqE,GAalD,GAJAhF,KAAKqD,gBAAgBV,8BAA8BL,KAAK2C,UAAUD,IAI1C,mBAAdrE,GAA2B,CAEjC,GAAIO,GAAWwD,EAAEC,UAEjBhE,IAEQqD,OAAS,YACTC,aAAee,GAEnB,WAAa9D,EAASN,YAI1BM,EAAS4D,KAAK,WAEVf,GAEQC,OAAS,YACTC,aAAee,UAW3BjB,IAEQC,OAAS,YACTC,aAAee,KAmB/BE,gBAAkB,SAASnB,EAAIrD,EAAaC,GAExC,GAAIwE,GAAc,IAElB,IAA8B,aAA3BzE,EAAY0E,WAEXD,EAAcT,EAAElB,MAER6B,YAAc,mDACdL,MACII,WAAa1E,EAAY0E,WACzBE,UAAYtF,KAAKoD,UACjBmC,SAAW7E,EAAY6E,SACvBC,SAAW9E,EAAY8E,UAE3BC,KAAO,OACPC,IAAK1F,KAAKsD,qBAIf,CAAA,GAA8B,iCAA3B5C,EAAY0E,WAkBlB,KAAM,IAAInF,OAAM,2BAAgCS,EAAY0E,WAAa,MAhBzED,GAAcT,EAAElB,MAER6B,YAAc,mDACdL,MACII,WAAa1E,EAAY0E,WACzBE,UAAYtF,KAAKoD,UACjBuC,sBAAwBjF,EAAYiF,sBACpCC,4BAA8BlF,EAAYkF,6BAE9CH,KAAO,OACPC,IAAK1F,KAAKsD,iBAYtB6B,EAAYL,KAAKJ,EAAEmB,MAAM7F,KAAK+E,4BAA6B/E,KAAM+D,EAAIpD,IACrEwE,EAAYW,KAAKpB,EAAEmB,MAAM7F,KAAKsE,0BAA2BtE,KAAM+D,EAAIpD,KAYvEoF,MAAQ,SAASjF,EAASkF,GAItB,GAAqD,OAAlDhG,KAAKqD,gBAAgBpB,yBAAmC,CAGvD,GAAIf,GAAWwD,EAAEC,WAGbsB,EAAqB,GAAIpG,GAAMM,kBACnC8F,GAAmBpF,YAAYC,GAC/BmF,EAAmBlF,cAAciF,GACjCC,EAAmBhF,aAAaC,GAChC+E,EAAmB9E,mBAAmBnB,MAEtCA,KAAKkD,SAAS+C,GACd/E,EAAS4D,KAAKJ,EAAEmB,MAAM7F,KAAKkF,gBAAiBlF,KAAMc,IAClDI,EAAS4E,KAAKpB,EAAEmB,MAAM7F,KAAKkE,cAAelE,KAAMc,QAOhDiD,KAEQC,OAAS,YACTC,aAAejE,KAAKqD,gBAAgBpB,4BAQpDiE,OAAS,aASTpD,MAAQ,WAIJ,GAAIqD,GAAOnG,IAGXuD,UAASC,KAAO,WAEZ,MAAO2C,GAAKC,4BAA4BC,MAAMF,EAAMG,aAgB5DC,oBAAsB,SAASC,GAE3B,GAAIC,KAsBJ,OAnB+B,gBAArBD,GAAc,IAEpBC,EAAoB,GAAKD,EAAc,GAEL,IAA/BC,EAAoBC,SAEnBD,EAAoB,GAAKzG,KAAK2G,mBAAmBH,EAAc,MASnEC,EAAoB,GAAKzG,KAAK2G,mBAAmBH,EAAc,IAI5DC,GAcXE,mBAAqB,SAASC,GA0C1B,IAAI,GAtCAC,IACA,UACA,QACA,aACA,QACA,WACA,WACA,cACA,UACA,aACA,cACA,OACA,aACA,WACA,QACA,SACA,UACA,aACA,UACA,QACA,gBACA,WACA,WACA,cACA,gBACA,aACA,UACA,UACA,cACA,OACA,MACA,WACA,MACA,aAGAC,KAEIC,EAAI,EAAGA,EAAIF,EAAmBH,SAAUK,EAEM,mBAAxCH,GAAaC,EAAmBE,MAEtCD,EAAmBD,EAAmBE,IAAMH,EAAaC,EAAmBE,IAMpF,OAAOD,IAeXE,oBAAsB,SAASC,GAE3B,GAAIC,GAAexC,EAAEC,UA2CrB,OAxCAuC,GAAaC,kBAAoB,SAASC,GACtC,MAAOH,GAAkBE,kBAAkBC,IAI/CF,EAAaG,sBAAwB,WACjC,MAAOJ,GAAkBI,yBAI7BH,EAAaI,iBAAmB,SAASC,EAAMC,GAE3C,MADAP,GAAkBK,iBAAiBC,EAAMC,GAClCxH,MAIXkH,EAAaO,iBAAmB,SAAShC,GAErC,MADAwB,GAAkBQ,iBAAiBhC,GAC5BzF,MAIXkH,EAAaQ,WAAa,SAASC,GAE/B,MADAV,GAAkBS,WAAWC,GACtB3H,MAIXkH,EAAaU,MAAQ,SAASC,GAE1B,MADAZ,GAAkBW,MAAMC,GACjB7H,MAGXkH,EAAaY,QAAUZ,EAAapC,KACpCoC,EAAarC,MAAQqC,EAAapB,KAElCoB,EAAaa,WAAad,EAAkBc,WAC5Cb,EAAalD,OAASiD,EAAkBjD,OACxCkD,EAAaW,WAAaZ,EAAkBY,WAErCX,GAcXc,uBAAyB,SAASC,EAAuBC,EAAclD,EAAMR,EAAYD,GAIrF2D,EAAatH,QAAQoE,EAAMR,EAAYD,IAiB3C4D,uBAAyB,SAASF,EAAuBC,EAAc3D,EAAOP,EAAQS,GAGlF,GAAI2D,GAASpI,KAAKmD,cAAcoB,EAGhC,IAAc3C,SAAXwG,EAEC,OAAOA,GACH,IAAK,UAIDpI,KAAKqI,oBAAoBJ,EAAuBC,EAChD,MAEJ,KAAK,SAIDlI,KAAKsI,mBAAmBL,EAAuBC,EAC/C,MAEJ,SACI,KAAM,IAAIjI,OAAM,WAAcmI,EAAS,sBAU/CF,GAAaK,OAAOhE,EAAOP,EAAQS,IAY3C+D,oCAAsC,SAAShC,GAG3C,GAAItE,GAAclC,KAAKqD,gBAAgBtB,gBAGpCG,IAAesE,EAAc,GAAGiC,UAGA,gBAArBjC,GAAc,IAGpBA,EAAc,IAAwC,KAAlCA,EAAc,GAAGkC,QAAQ,KAAc,IAAM,IACjElC,EAAc,IAAM,eACpBA,EAAc,IAAM,IACpBA,EAAc,IAAMtE,IAQpBsE,EAAc,GAAGd,KAA6C,KAAtCc,EAAc,GAAGd,IAAIgD,QAAQ,KAAc,IAAM,IACzElC,EAAc,GAAGd,KAAO,eACxBc,EAAc,GAAGd,KAAO,IACxBc,EAAc,GAAGd,KAAOxD,KAepCkE,4BAA8B,WAG1B,GAAI6B,GAAwBjI,KAAKuG,oBAAoBD,UAGrDtG,MAAKwI,oCAAoClC,UAKzC,IAAIW,GAAoB1D,SAASmB,EAAElB,KAAK6C,MAAM9C,SAASmB,EAAG4B,WACtDY,EAAelH,KAAKgH,oBAAoBC,EAU5C,OAHAA,GAAkBnB,KAAKpB,EAAEmB,MAAM7F,KAAKmI,uBAAwBnI,KAAMiI,EAAuBf,IACzFD,EAAkBnC,KAAKJ,EAAEmB,MAAM7F,KAAKgI,uBAAwBhI,KAAMiI,EAAuBf,IAElFA,GAcXyB,+BAAiC,SAASzB,EAAclC,EAAMR,EAAYD,GAEtE2C,EAAatG,QAAQoE,EAAMR,EAAYD,IAc3CqE,+BAAiC,SAAS1B,EAAc3C,EAAOP,EAAQS,GAEnEyC,EAAaqB,OAAOhE,EAAOP,EAAQS,IAcvCoE,6BAA+B,SAASZ,EAAuBf,EAAclC,GAMzEhF,KAAKqD,gBAAgBV,8BAA8BL,KAAK2C,UAAUD,GAGlE,IAAIG,GAAcT,EAAElB,KAAKyE,EACzB9C,GAAYL,KAAKJ,EAAEmB,MAAM7F,KAAK2I,+BAAgC3I,KAAMkH,IACpE/B,EAAYW,KAAKpB,EAAEmB,MAAM7F,KAAK4I,+BAAgC5I,KAAMkH,KAcxE4B,4BAA8B,SAASb,EAAuBf,EAAclC,GAMxEhF,KAAKqD,gBAAgBV,8BAA8BL,KAAK2C,UAAUD,GAGlE,IAAIG,GAAcT,EAAElB,KAAKyE,EACzB9C,GAAYL,KAAKJ,EAAEmB,MAAM7F,KAAK2I,+BAAgC3I,KAAMkH,IACpE/B,EAAYW,KAAKpB,EAAEmB,MAAM7F,KAAK4I,+BAAgC5I,KAAMkH,KAWxEmB,oBAAsB,SAASJ,EAAuBf,GAGlD,GAAIzE,GAAezC,KAAKqD,gBAAgBb,iBAIxC,IAAGC,EAAc,CAEb,GAAI0C,GAAcT,EAAElB,MAEZkC,IAAM1F,KAAKsD,eACX0B,MACII,WAAa,gBACb1C,cAAgBD,EAChB6C,UAAYtF,KAAKoD,WAErB2F,SAAW,OACXtD,KAAM,QAGdN,GAAYW,KAAKpB,EAAEmB,MAAM7F,KAAKsI,mBAAoBtI,KAAMkH,IACxD/B,EAAYL,KAAKJ,EAAEmB,MAAM7F,KAAK6I,6BAA8B7I,KAAMiI,EAAuBf,QAOzFlH,MAAKsI,mBAAmBL,EAAuBf,IAavDoB,mBAAqB,SAASL,EAAuBf,GAEjD9C,QAAQC,IAAI,qBAKZ,IAAInD,GAAWwD,EAAEC,WAGbsB,EAAqB,GAAIpG,GAAMM,kBAGnC8F,GAAmBhF,aAAaC,GAChC+E,EAAmB9E,mBAAmBnB,MAEtCA,KAAKkD,SAAS+C,GAId/E,EAAS4D,KAAKJ,EAAEmB,MAAM7F,KAAKgJ,0BAA2BhJ,KAAMiI,EAAuBf,IACnFhG,EAAS4E,KAAKpB,EAAEmB,MAAM,WAGlBzB,QAAQC,IAAI,+BAEbrE,QAoBPgJ,0BAA4B,SAASf,EAAuBC,EAAce,GAEtE,OAAOA,EAAoB7D,YAKvB,IAAK,WACD,GAAID,GAAcT,EAAElB,MAEZ6B,YAAc,mDACdL,MACII,WAAa,WACbG,SAAW0D,EAAoB1D,SAC/BC,SAAWyD,EAAoBzD,SAC/BF,UAAYtF,KAAKoD,WAErBqC,KAAO,OACPC,IAAK1F,KAAKsD,gBAGlB6B,GAAYL,KAAKJ,EAAEmB,MAAM7F,KAAK8I,4BAA6B9I,KAAMiI,EAAuBC,GAIxF,MAKJ,KAAK,qBACDxD,EAAElB,MAEM6B,YAAc,mDACdL,MACII,WAAa,qBACbE,UAAYtF,KAAKoD,WAErBqC,KAAO,OACPC,IAAK1F,KAAKsD,oBAmBlCzD,EAAMqJ,KAAO,SAASC,EAAWC,GAE7B,OAAOD,GACH,IAAK,UACDtJ,EAAMU,gBAAkB,GAAIV,GAAMK,QAAQ2C,sBAAsBuG,EAChE,MACJ,KAAK,WACDvJ,EAAMU,gBAAkB,GAAIV,GAAMK,QAAQ6C,uBAAuBqG,EACjE,MACJ,SACI,KAAM,IAAInJ,OAAM,qCAAwCkJ,EAAY,OAG5EtJ,EAAMU,gBAAgBuC,SAI1BjD,EAAMkG,MAAQ,SAAShC,EAAIiC,GAEvBnG,EAAMU,gBAAgBwF,MAAMhC,EAAIiC,IAI7BnG"}