{"version":3,"file":"oauth.min.js","sources":["oauth.js"],"names":["root","factory","define","amd","OAuth","exports","module","this","Error","Request","CredentialsPromise","_credentials","_loginCb","_loginFnCb","_loginFnOpts","_loginOpts","_requestManager","prototype","getCredentials","getLoginCb","getLoginFnCb","sendCredentials","credentials","loginFnCb","loginFnOpts","_login","_setLoginCb","loginCb","_setLoginOpts","loginOpts","_setRequestManager","requestManager","StorageManager","configuration","_storage","localStorage","_storageKey","Storage","storage","undefined","sessionStorage","storageKey","getAccessToken","accessTokenResponse","getAccessTokenResponse","accessToken","access_token","rawAccessTokenResponse","getItem","JSON","parse","getRefreshToken","refreshToken","refresh_token","persistRawAccessTokenResponse","setItem","AngularRequestManager","start","BackboneRequestManager","_backupedBackboneDotAjax","_credentialsPromise","_clientType","_loginFn","_parseErrorFn","_clientId","_storageManager","_tokenEndpoint","Backbone","ajax","loginFn","clientId","tokenEndpoint","parseErrorFn","getStorageManager","getLoginStatus","cb","status","authResponse","_onTokenEndpointPostError","jqXHR","deferred","$","Deferred","responseJSON","error","resolve","done","_onTokenEndpointPostSuccess","data","stringify","credentialsPromise","ajaxPromise","grant_type","contentType","client_id","username","password","type","url","facebook_access_token","facebook_app_scoped_user_id","proxy","fail","login","opts","logout","This","_overwrittenBackboneDotAjax","apply","arguments","_cloneAjaxArguments","ajaxArguments","clonedAjaxArguments","length","_cloneAjaxSettings","ajaxSettings","settingsAttributes","clonedAjaxSettings","i","_createOAuthPromise","jQueryAjaxPromise","oAuthPromise","getResponseHeader","key","getAllResponseHeaders","setRequestHeader","name","value","overrideMimeType","statusCode","map","abort","statusText","success","readyState","_jQueryAjaxPromiseDone","originalAjaxArguments","oauthPromise","textStatus","_jQueryAjaxPromiseFail","errorThrown","action","_refreshAccessToken","_reniewAccessToken","reject","_updateAjaxArgumentsWithAccessToken","secured","indexOf","_onOriginalRequestReplayedDone","_onOriginalRequestReplayedFail","_onRefreshAccessTokenSuccess","overwittenAjaxArguments","_onReniewAccessTokenSuccess","dataType","console","log","_onCredentialsPromiseDone","credentialsSettings","init","framework","settings"],"mappings":"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"}