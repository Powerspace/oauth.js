{"version":3,"file":"oauth.min.js","sources":["oauth.js"],"names":["root","factory","define","amd","OAuth","exports","module","this","Error","Request","LoginContext","_credentials","_loginCb","_loginFnCb","_loginFnOpts","_loginOpts","_requestManager","prototype","getCredentials","getLoginCb","getLoginFnCb","sendCredentials","credentials","loginFnCb","loginFnOpts","_login","_setLoginCb","loginCb","_setLoginOpts","loginOpts","_setRequestManager","requestManager","StorageManager","configuration","_storage","localStorage","_storageKey","Storage","storage","undefined","sessionStorage","storageKey","clear","removeItem","getAccessToken","accessTokenResponse","getAccessTokenResponse","accessToken","access_token","rawAccessTokenResponse","getItem","JSON","parse","getRefreshToken","refreshToken","refresh_token","persistRawAccessTokenResponse","setItem","UrlUtils","addArgument","url","name","value","updatedUrl","nameEqual","argumentPos","indexOf","prefix","substring","length","suffix","nextArgumentPos","AngularRequestManager","start","BackboneRequestManager","_backupedBackboneDotAjax","_loginContext","_clientType","_loginFn","_parseErrorFn","_clientId","_storageManager","_tokenEndpoint","Backbone","ajax","loginFn","clientId","tokenEndpoint","parseErrorFn","getStorageManager","getLoginStatus","cb","status","authResponse","_onTokenEndpointPostError","jqXHR","deferred","$","Deferred","responseJSON","error","resolve","done","_onTokenEndpointPostSuccess","data","stringify","loginContext","ajaxPromise","grant_type","contentType","client_id","username","password","type","facebook_access_token","facebook_app_scoped_user_id","proxy","fail","login","opts","logout","logoutCb","This","_overwrittenBackboneDotAjax","apply","arguments","_cloneAjaxArguments","ajaxArguments","clonedAjaxArguments","_cloneAjaxSettings","ajaxSettings","settingsAttributes","clonedAjaxSettings","i","_createOAuthPromise","jQueryAjaxPromise","oAuthPromise","getResponseHeader","key","getAllResponseHeaders","setRequestHeader","overrideMimeType","statusCode","map","abort","statusText","success","readyState","_jQueryAjaxPromiseDone","originalAjaxArguments","oauthPromise","textStatus","_jQueryAjaxPromiseFail","errorThrown","action","_refreshAccessToken","_reniewAccessToken","reject","_updateAjaxArgumentsWithAccessToken","secured","_onOriginalRequestReplayedDone","_onOriginalRequestReplayedFail","_onRefreshAccessTokenSuccess","overwittenAjaxArguments","_onReniewAccessTokenSuccess","dataType","console","log","_onCredentialsPromiseDone","credentialsSettings","init","framework","settings"],"mappings":"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"}